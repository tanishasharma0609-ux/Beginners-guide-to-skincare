<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tips & Info - Beginner's Guide to Skin Care</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="tips-page">
  <header>
    <h1>Tips & Info</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="profile.html">Your Profile</a>
      <a href="tips.html" class="active">Tips & Info</a>
      <a href="survey.html">Survey</a>
      <a href="results.html">Survey Answers</a>
      <a href="products.html">Products</a>
    </nav>
  </header>

  <main>
    <!-- Hero Section -->
    <div class="tips-hero"> 
      <h2>Your Complete Skincare Guide</h2>
      <p>Discover expert tips, routines, and secrets for healthy, glowing skin</p>
    </div>

    <!-- Search/Filter Section -->
    <div class="card search-card">
      <div class="search-container">
        <input type="text" id="tipSearch" placeholder="Search for tips..." class="search-input">
        <select id="categoryFilter" class="category-filter">
          <option value="all">All Categories</option>
          <option value="basics">Basics</option>
          <option value="routine">Daily Routine</option>
          <option value="ingredients">Ingredients</option>
          <option value="problems">Problem Solving</option>
          <option value="lifestyle">Lifestyle</option>
          <option value="seasonal">Seasonal Care</option>
        </select>
      </div>
    </div>

    <!-- Dynamic Tips Section -->
    <div id="tipsContainer">
      <!-- Firebase tips will load here -->
    </div>

    <!-- Other static sections like Expert Quotes, Seasonal Care etc. -->
    <!-- Keep your existing HTML for quotes, routines, lifestyle, etc. -->
  </main>

  <footer>Â© 2025 Beginner's Guide to Skin Care</footer>

  <!-- Firebase Scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    const firebaseConfig = {
  apiKey: "AIzaSyAKIz9s410M8-Ycu0fibPm0S1iJXEG-5ko",
  authDomain: "studio-4130330890-84f62.firebaseapp.com",
  projectId: "studio-4130330890-84f62",
  storageBucket: "studio-4130330890-84f62.firebasestorage.app",
  messagingSenderId: "96173266847",
  appId: "1:96173266847:web:26cfea51521f6865c50faa"
};
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const tipsContainer = document.getElementById("tipsContainer");

    async function loadTips() {
      tipsContainer.innerHTML = "<p>Loading tips...</p>";

      try {
        const tipsSnapshot = await getDocs(collection(db, "tips")); // Firestore collection name
        tipsContainer.innerHTML = ""; // clear loading

        if (tipsSnapshot.empty) {
          tipsContainer.innerHTML = "<p>No tips available.</p>";
          return;
        }

        // Organize tips by category
        const categories = {};

        tipsSnapshot.forEach(doc => {
          const data = doc.data();
          const category = data.category || "basics";
          if (!categories[category]) categories[category] = [];
          categories[category].push(data);
        });

        // Create sections dynamically
        Object.keys(categories).forEach(category => {
          const section = document.createElement("div");
          section.className = "tips-section";
          section.dataset.category = category;

          const header = document.createElement("div");
          header.className = "section-header";
          header.innerHTML = `<h3>${capitalize(category)} Tips</h3><p>Essential knowledge for ${category} care</p>`;
          section.appendChild(header);

          const grid = document.createElement("div");
          grid.className = "tips-grid";

          categories[category].forEach(tip => {
            const card = document.createElement("div");
            card.className = "tip-card animated-card";

            card.innerHTML = `
              <div class="tip-image">
                ${tip.image ? `<img src="${tip.image}" alt="${tip.title}" onerror="this.style.display='none'">` : ""}
                <div class="tip-overlay"></div>
              </div>
              <div class="tip-content">
                <h4>${tip.title}</h4>
                <p>${tip.description}</p>
                <div class="tip-tags">
                  ${tip.tags ? tip.tags.map(tag => `<span class="tag">${tag}</span>`).join("") : ""}
                </div>
              </div>
            `;

            grid.appendChild(card);
          });

          section.appendChild(grid);
          tipsContainer.appendChild(section);
        });

      } catch (err) {
        console.error("Error loading tips:", err);
        tipsContainer.innerHTML = "<p>Failed to load tips.</p>";
      }
    }

    function capitalize(str) {
      return str.charAt(0).toUpperCase() + str.slice(1);
    }

    // Call Firebase load
    loadTips();
  </script>

  <!-- Your existing animation & search scripts -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.feather) feather.replace();

      const searchInput = document.getElementById('tipSearch');
      const categoryFilter = document.getElementById('categoryFilter');

      function filterTips() {
        const searchTerm = searchInput.value.toLowerCase();
        const selectedCategory = categoryFilter.value;
        const sections = document.querySelectorAll('.tips-section');

        sections.forEach(section => {
          const sectionCategory = section.dataset.category;
          const showCategory = selectedCategory === 'all' || sectionCategory === selectedCategory;

          if (!showCategory) {
            section.style.display = 'none';
            return;
          }

          const cards = section.querySelectorAll('.tip-card');
          let hasVisible = false;

          cards.forEach(card => {
            const text = card.textContent.toLowerCase();
            const showCard = searchTerm === '' || text.includes(searchTerm);
            card.style.display = showCard ? 'block' : 'none';
            if (showCard) hasVisible = true;
          });

          section.style.display = hasVisible ? 'block' : 'none';
        });
      }

      if (searchInput) searchInput.addEventListener('input', filterTips);
      if (categoryFilter) categoryFilter.addEventListener('change', filterTips);
    });
  </script>

</body>
</html>
